#!/bin/zsh

main() {
  local workflow=${1:-ci.yml} branch=${2:-main} limit=${3:-10}
  gh run list --workflow "$workflow" --branch "$branch" \
             --limit "$limit" --json createdAt,updatedAt,conclusion \
    | jq -r '.[] | select(.conclusion=="success")
                | ((.updatedAt|fromdateiso8601) - (.createdAt|fromdateiso8601))'
}

main "$@"
